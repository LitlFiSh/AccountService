#### 后端接口

1. 登录 `/user/login`
   - 携带参数：`username`、`password`
2. 注销 `/user/logout`
3. 查找用户信息 `/user/info`
   - 携带参数：`username`
4. 权限验证
   - USER 角色测试接口：`/user/hello`
   - ADMIN 角色测试接口：`/admin/hello`

注：除了登录接口外，其他接口发送请求时需在请求体头部携带字段为`Authorization`的 token 信息

返回值：

```json
{
    success//请求是否成功，取值 true 或 false
    code//错误代码
    msg//错误信息
    data//返回的数据
}
```

错误代码以及对应错误信息列表：

```
1, "成功"
0, "失败"
/*token 错误*/
11, "token失效"
12, "token为空"
/*用户错误*/
21, "用户未登录"
22, "用户账户过期"
23, "密码错误"
24, "密码过期"
25, "账号不可用"
26, "账号被锁定"
27, "账号不存在"
28, "账号已存在"
29, "账号下线"
/*业务错误*/
31, "没有权限"
```

#### 数据库表设计

##### Account（账户）

| name      | type        | 描述                       |
| --------- | ----------- | -------------------------- |
| id        | int         | 账户ID                     |
| password  | varchar(64) | 账户密码                   |
| is_active | boolean     | 账户是否可用               |
| openid    | varchar(32) | openID（微信登录用）       |
| role_id   | int         | 角色ID（外键，对应角色表） |

##### Role（角色）

| name      | type        | 描述   |
| --------- | ----------- | ------ |
| id        | int         | 角色ID |
| role_name | varchar(16) | 角色名 |

##### userInfo（用户信息）

| name          | type        | 描述                       |
| ------------- | ----------- | -------------------------- |
| id            | int         | 用户ID                     |
| username      | varchar(32) | 用户名                     |
| department_id | int         | 部门ID（外键，对应部门表） |
| account_id    | int         | 账户ID（外键，对应账户表） |

##### Department（部门）

| name      | type        | 描述     |
| --------- | ----------- | -------- |
| id        | int         | 部门ID   |
| dept_name | varchar(32) | 部门名称 |

##### Menu（菜单）

| name | type        | 描述                       |
| ---- | ----------- | -------------------------- |
| id   | int         | 菜单ID                     |
| path | varchar(64) | 菜单路径                   |
| name | varchar(32) | 菜单名称                   |
| pid  | int         | 父菜单ID                   |
| rid  | int         | 角色ID（外键，对应角色表） |

#### 设备采购申请单

##### orderapply（申请单）

| 字段                  | 类型          | 描述                         |
| --------------------- | ------------- | ---------------------------- |
| id                    | int(6)        | 申请单编号                   |
| apply_department      | int(2)        | 申请部门                     |
| apply_user            | int           | 申请人（关联 userInfo 表）   |
| fund_code             | int(6)        | 采购经费代码                 |
| apply_date            | datetime      | 申请日期                     |
| total                 | decimal(10,2) | 采购总金额（总长度10位数字） |
| dept_leader_sign      | tinyint(1)    | 部门领导签名状态             |
| dept_leader_sign_date | datetime      | 部门领导签名日期             |
| inst_leader_sign      | tinyint(1)    | 主管院领导签名状态           |
| inst_leader_sign_date | datetime      | 主管院领导签名日期           |
| status                | tinyint(2)    | 申请单状态                   |

##### orderlist（申请记录）

| 字段               | 类型        | 描述                                                         |
| ------------------ | ----------- | ------------------------------------------------------------ |
| id                 | int(8)      | 唯一id（申请单id + 序号）                                    |
| no                 | int(2)      | 序号                                                         |
| name               | varchar(64) | 物资名称                                                     |
| type               | varchat(64) | 配置或技术参数                                               |
| unit               | varcahr(16) | 单位                                                         |
| quantity           | int(6)      | 数量                                                         |
| budget_unit_price  | int(10)     | 预算单价                                                     |
| budget_total_price | int(16)     | 预算总价                                                     |
| reason             | text        | 申购原因                                                     |
| new_user           | varchar(32) | 新设备使用人                                                 |
| old                | text        | 旧设备资产号、名称、设备领用人、目前所在地及设备状态（在用、闲置、报废等） |
| from_id            | int(6)      | 对应申请单id                                                 |
| status             | tinyint(2)  | 申请记录状态                                                 |

